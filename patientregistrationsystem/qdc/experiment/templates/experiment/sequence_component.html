{% extends "experiment/component_template.html" %}

{% block header %}

    <script type="text/javascript">

        $(document).ready(function () {

            {% if form.number_of_mandatory_components.value == None %}
                $("#id_number_of_mandatory_components").prop('disabled', true);
                $("#mandatory_components").prop('checked', true);
            {% endif %}

            $("#mandatory_components").click(function () {
                var unlimited = $("#mandatory_components").is(":checked");
                $("#id_number_of_mandatory_components").prop('disabled', unlimited);
                $("#id_number_of_mandatory_components").prop('value', "");
            });

        });

    </script>

{% endblock %}

{% block breadcrumb %}
    <li class="active">Nova sequência</li>
{% endblock %}

{% block list_components %}
    {% if creating_workflow %}
        <div class="row">
            <div class="col-xs-6 col-sm-6">
                <label class="control-label">Sequência <b style="color: red;">*</b></label>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6 col-sm-6">
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
                        Escolha a sequência
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Sequência 1</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Sequência 2</a></li>
                        <li role="presentation" class="divider"></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Nova sequência</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <br>
    {% endif %}
{% endblock %}

{% block extra_fields %}
    <div class="container span6 offset3 well ">
        <div class="row">
            <div class="col-xs-6 col-sm-10">
                <div class="form-group">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>Componente</th>
                                <th>Tipo</th>
                                <th>Ordem</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for configuration in configuration_list %}
                            <tr>
                                <td><a data-toggle="tooltip" data-placement="left" title="Editar" href="/experiment/{{ experiment.id }}/sequence/{{ sequence.id }}/component/edit/{{ configuration.component.id }}/{{ configuration.component.component_type }}">{{ configuration.component.identification }}</a></td>
                                <td>{{ configuration.component.component_type }}</td>
                                <td>{{ configuration.order }}</td>
                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>



                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle {% if creating %} disabled{% endif %}" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
                        Inserir componente
                        <span class="caret"></span>
                    </button>
                    {% if updating %}
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="/experiment/{{ experiment.id }}/sequence/{{ sequence.id }}/new_component/task">Tarefa</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="/experiment/{{ experiment.id }}/sequence/{{ sequence.id }}/new_component/stimulus">Estímulo</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="/experiment/{{ experiment.id }}/sequence/{{ sequence.id }}/new_component/pause">Pausa</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="/experiment/{{ experiment.id }}/sequence/{{ sequence.id }}/new_component/questionnaire">Questionário</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="/experiment/{{ experiment.id }}/sequence/{{ sequence.id }}/new_component/sequence">Sequência</a></li>
                        </ul>
                    {% endif %}
                </div>
                </br>
                {% if not workflow %}
                    <div class="row">
                        <div class="col-xs-6 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="has_random_components" {% if form.has_random_components.value == True %} checked {% endif %} name="has_random_components" type="checkbox"> Sequência aleatória
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input id="mandatory_components" type="checkbox"> Todos os componentes são obrigatórios
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-1"></div>
                        <div class="col-xs-6 col-sm-2">
                            <div class="form-group">
                                {{ form.number_of_mandatory_components }}
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-6">
                            Quantidade de componentes obrigatórios
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}